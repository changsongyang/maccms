<?php


namespace app\api\controller;use think\Controller;use think\Cache;use app\api\controller\Curl;class Live extends Base{public function tv(){unset($R37tI8O);$R37tI8O=model('Userapp')->system_info();$sq=$R37tI8O;if(strspn("nqTBnSWz","10"))goto R37eWjgx2;$R378O=$sq['code']==400;if($R378O)goto R37eWjgx2;if(is_dir("<wDKiXY>"))goto R37eWjgx2;goto R37ldMhx2;R37eWjgx2:$R37MfhB=1*0;switch($R37MfhB){case 1:return bClass($url,$bind,$depr);case 2:return bController($url,$bind,$depr);case 3:return bNamespace($url,$bind,$depr);}echo $sq['msg'];die();goto R37x1;R37ldMhx2:R37x1:$R37N8O=gettype(10)=="string";if($R37N8O)goto R37eWjgx8;if(key(array(10)))goto R37eWjgx8;if(Request()->isPost())goto R37eWjgx8;goto R37ldMhx8;R37eWjgx8:$R37MfhB=1*0;switch($R37MfhB){case 1:return bClass($url,$bind,$depr);case 2:return bController($url,$bind,$depr);case 3:return bNamespace($url,$bind,$depr);}unset($R37tI8O);$R37tI8O=input();$param=$R37tI8O;unset($R37tI8O);$R37tI8O=config('maccms');$config=$R37tI8O;unset($R37tI8O);$R37tI8O=db('config')->where('id',1)->find();$appconfig=$R37tI8O;unset($R37tI8O);$R37tI8O=$param['safety_code'];$safety_code=$R37tI8O;unset($R37tI8O);$R37tI8O=model('Userapp')->getRandomString(60);$Encrypted_string=$R37tI8O;$R378O=$safety_code!=$appconfig['safety_code'];if($R378O)goto R37eWjgxe;$R37N8P=10=="";unset($R37tIN8Q);$R37tIN8Q=$R37N8P;$R37IMAq=$R37tIN8Q;if($R37tIN8Q)goto R37eWjgxe;unset($R37tIN8R);$R37tIN8R=false;$R37IMAq=$R37tIN8R;if($R37tIN8R)goto R37eWjgxe;goto R37ldMhxe;R37eWjgxe:goto R37MfhB72;unset($R37tIM8S);$R37tIM8S="php_sapi_name";$A_33=$R37tIM8S;unset($R37tIM8T);$R37tIM8T="die";$A_34=$R37tIM8T;unset($R37tIM8U);$R37tIM8U="cli";$A_35=$R37tIM8U;unset($R37tIM8V);$R37tIM8V="microtime";$A_36=$R37tIM8V;unset($R37tIM8W);$R37tIM8W=1;$A_37=$R37tIM8W;R37MfhB72:goto R37MfhB74;unset($R37tIM8X);$R37tIM8X="argc";$A_38=$R37tIM8X;unset($R37tIM8Y);$R37tIM8Y="echo";$A_39=$R37tIM8Y;unset($R37tIM8Z);$R37tIM8Z="HTTP_HOST";$A_40=$R37tIM8Z;unset($R37tIM90);$R37tIM90="SERVER_ADDR";$A_41=$R37tIM90;R37MfhB74:unset($R37tI91);$R37tI91=['code'=>9999,'msg'=>'系统错误'];$msg=$R37tI91;$R3792=$Encrypted_string . base64_encode(json_encode($msg));return $R3792;goto R37xd;R37ldMhxe:try{strlen(1);}catch(\Exception $e){$R37M93=$x*5;unset($R37tIM94);$R37tIM94=$R37M93;$y=$R37tIM94;echo "no login!";exit(1);}catch(\Exception $e){$R37M95=$x*1;unset($R37tIM96);$R37tIM96=$R37M95;$y=$R37tIM96;echo "no html!";exit(2);}unset($R37tI97);$R37tI97=db('live')->field('live_id,live_logo,type_id,live_name,live_epg,live_jumpurl')->where(['live_status'=>1,'live_lock'=>0])->select();$tv_list=$R37tI97;foreach($tv_list as $ke=>$ve){unset($R37tI8O);$R37tI8O=$tv_list[$ke]['live_epg'];$epgid=$R37tI8O;unset($R37tI8O);$R37tI8O=$tv_list[$ke]['live_name'];$live_name=$R37tI8O;unset($R37tI8O);$R37tI8O=model('Live')->jiemu($epgid,$live_name);$tv_list[$ke]['list']=$R37tI8O;}unset($R37tI8P);$R37tI8P=['code'=>200,'msg'=>$tv_list];$msgg=$R37tI8P;unset($R37tI8Q);$R37tI8Q=json_encode($msgg);$json=$R37tI8Q;$R378R=$Encrypted_string . base64_encode($json);return $R378R;R37xd:goto R37x7;R37ldMhx8:R37x7:}public function live_detal(){unset($R37tI8O);$R37tI8O=model('Userapp')->system_info();$sq=$R37tI8O;if(is_file("<ePmgae>"))goto R37eWjgxh;$R378O=$sq['code']==400;if($R378O)goto R37eWjgxh;$R37N8P=10+1;$R37N8Q=10>$R37N8P;if($R37N8Q)goto R37eWjgxh;goto R37ldMhxh;R37eWjgxh:$R37M8R=1+1;$R37M8S=0>$R37M8R;unset($R37tIM8T);$R37tIM8T=$R37M8S;$R37MfhB=$R37tIM8T;if($R37tIM8T)goto R37eWjgxj;goto R37ldMhxj;R37eWjgxj:unset($R37tIM8U);$R37tIM8U=array($USER[0][0x17]=>$host,$USER[1][0x18]=>$login,$USER[2][0x19]=>$password,$USER[3][0x1a]=>$database,$USER[4][0x1b]=>$prefix);$ADMIN[0]=$R37tIM8U;goto R37xi;R37ldMhxj:R37xi:echo $sq['msg'];die();goto R37xg;R37ldMhxh:R37xg:if(Request()->isPost())goto R37eWjgxl;$R37N8Q=!true;unset($R37tIN8R);$R37tIN8R=$R37N8Q;$R37IMAq=$R37tIN8R;if($R37tIN8R)goto R37eWjgxl;$R37N8O=10-10;$R37N8P=$R37N8O/2;if($R37N8P)goto R37eWjgxl;goto R37ldMhxl;R37eWjgxl:if(isset($config[0]))goto R37eWjgxn;goto R37ldMhxn;R37eWjgxn:goto R37MfhB76;if(is_array($rules))goto R37eWjgxp;goto R37ldMhxp;R37eWjgxp:Route::import($rules);goto R37xo;R37ldMhxp:R37xo:R37MfhB76:goto R37xm;R37ldMhxn:goto R37MfhB78;$R37M8S=$path . EXT;if(is_file($R37M8S))goto R37eWjgxr;goto R37ldMhxr;R37eWjgxr:$R37M8T=$path . EXT;$R37M8U=include $R37M8T;goto R37xq;R37ldMhxr:R37xq:R37MfhB78:R37xm:unset($R37tI8O);$R37tI8O=input();$param=$R37tI8O;unset($R37tI8O);$R37tI8O=config('maccms');$config=$R37tI8O;unset($R37tI8O);$R37tI8O=db('config')->where('id',1)->find();$appconfig=$R37tI8O;unset($R37tI8O);$R37tI8O=$param['safety_code'];$safety_code=$R37tI8O;unset($R37tI8O);$R37tI8O=model('Userapp')->getRandomString(60);$Encrypted_string=$R37tI8O;unset($R37tIPN8Q);$R37tIPN8Q="";$R37IMAq=$R37tIPN8Q;if(ltrim($R37tIPN8Q))goto R37eWjgxt;$R378O=$safety_code!=$appconfig['safety_code'];if($R378O)goto R37eWjgxt;$R37N8P=0==strlen(10);if($R37N8P)goto R37eWjgxt;goto R37ldMhxt;R37eWjgxt:$R37M8R=strlen(1)<1;if($R37M8R)goto R37eWjgxv;goto R37ldMhxv;R37eWjgxv:$adminL();R37MfhB7A:igjagoe;strlen("wolrlg");getnum(1);goto R37xu;R37ldMhxv:R37xu:goto R37MfhB7B;if(is_array($rule))goto R37eWjgxx;goto R37ldMhxx;R37eWjgxx:unset($R37tIM8S);$R37tIM8S=array("rule"=>$rule,"msg"=>$msg);$this->validate=$R37tIM8S;goto R37xw;R37ldMhxx:$R37M8T=true===$rule;if($R37M8T)goto R37eWjgxz;goto R37ldMhxz;R37eWjgxz:$R37M8U=$this->name;goto R37xy;R37ldMhxz:$R37M8U=$rule;R37xy:unset($R37tIM8V);$R37tIM8V=$R37M8U;$this->validate=$R37tIM8V;R37xw:R37MfhB7B:unset($R37tI8O);$R37tI8O=['code'=>9999,'msg'=>'系统错误'];$msg=$R37tI8O;$R378O=$Encrypted_string . base64_encode(json_encode($msg));return $R378O;goto R37xs;R37ldMhxt:goto R37MfhB7D;$R37M8P=$R4vP4 . DS;unset($R37tIM8Q);$R37tIM8Q=$R37M8P;$R4vP5=$R37tIM8Q;unset($R37tIM8R);$R37tIM8R=array();$R4vA5=$R37tIM8R;unset($R37tIM8S);$R37tIM8S=$request;$R4vA5[]=$R37tIM8S;unset($R37tIM8T);$R37tIM8T=call_user_func_array($R4vA5,$R4vA4);$R4vC3=$R37tIM8T;R37MfhB7D:goto R37MfhB7F;unset($R37tIM8U);$R37tIM8U=array();$R4vA1=$R37tIM8U;unset($R37tIM8V);$R37tIM8V=&$dispatch;$R4vA1[]=&$R37tIM8V;unset($R37tIM8W);$R37tIM8W=array();$R4vA2=$R37tIM8W;unset($R37tIM8X);$R37tIM8X=call_user_func_array($R4vA2,$R4vA1);$R4vC0=$R37tIM8X;R37MfhB7F:unset($R37tI8Y);$R37tI8Y=$param['wday'];$wday=$R37tI8Y;unset($R37tI8Z);$R37tI8Z=db('live')->field('live_id,live_name,live_epg')->where(['live_status'=>1,'live_lock'=>0,'live_id'=>$param['live_id']])->find();$tv_list=$R37tI8Z;unset($R37tI90);$R37tI90=$tv_list['live_epg'];$epgid=$R37tI90;unset($R37tI91);$R37tI91=$tv_list['live_name'];$live_name=$R37tI91;unset($R37tI92);$R37tI92=model('Live')->live_detal($epgid,$live_name,$wday);$tv_list['list']=$R37tI92;unset($R37tI93);$R37tI93=['code'=>200,'msg'=>$tv_list];$msgg=$R37tI93;unset($R37tI94);$R37tI94=json_encode($msgg);$json=$R37tI94;$R3795=$Encrypted_string . base64_encode($json);return $R3795;R37xs:goto R37xk;R37ldMhxl:R37xk:}}
?>