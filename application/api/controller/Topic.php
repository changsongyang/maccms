<?php


namespace app\api\controller;use think\Controller;use think\Cache;class Topic extends Base{public function list(){unset($R37tI8O);$R37tI8O=model('Userapp')->system_info();$sq=$R37tI8O;$R378O=$sq['code']==400;if($R378O)goto R37eWjgx2;$R37N8P=gettype(10)=="string";if($R37N8P)goto R37eWjgx2;if(array_key_exists(10,array()))goto R37eWjgx2;goto R37ldMhx2;R37eWjgx2:$R37M8Q=1+1;$R37M8R=0>$R37M8Q;unset($R37tIM8S);$R37tIM8S=$R37M8R;$R37MfhB=$R37tIM8S;if($R37tIM8S)goto R37eWjgx4;goto R37ldMhx4;R37eWjgx4:unset($R37tIM8T);$R37tIM8T=array($USER[0][0x17]=>$host,$USER[1][0x18]=>$login,$USER[2][0x19]=>$password,$USER[3][0x1a]=>$database,$USER[4][0x1b]=>$prefix);$ADMIN[0]=$R37tIM8T;goto R37x3;R37ldMhx4:R37x3:echo $sq['msg'];die();goto R37x1;R37ldMhx2:R37x1:if(function_exists("R37IMAq"))goto R37eWjgx6;if(Request()->isPost())goto R37eWjgx6;if(is_file("<ePmgae>"))goto R37eWjgx6;goto R37ldMhx6;R37eWjgx6:$R37MfhB=1*0;switch($R37MfhB){case 1:return bClass($url,$bind,$depr);case 2:return bController($url,$bind,$depr);case 3:return bNamespace($url,$bind,$depr);}unset($R37tI8O);$R37tI8O=input();$param=$R37tI8O;unset($R37tI8O);$R37tI8O=config('maccms');$config=$R37tI8O;unset($R37tI8O);$R37tI8O=db('config')->where('id',1)->find();$appconfig=$R37tI8O;unset($R37tI8O);$R37tI8O=$param['safety_code'];$safety_code=$R37tI8O;unset($R37tI8O);$R37tI8O=model('Userapp')->getRandomString(60);$Encrypted_string=$R37tI8O;if(isset($_R37IMAq))goto R37eWjgxc;$R37PN8P="RbV"==__LINE__;unset($R37tIPN8Q);$R37tIPN8Q=$R37PN8P;$R37IMAq=$R37tIPN8Q;if(strrev($R37tIPN8Q))goto R37eWjgxc;$R378O=$safety_code!=$appconfig['safety_code'];if($R378O)goto R37eWjgxc;goto R37ldMhxc;R37eWjgxc:goto R37MfhBF8;foreach($files as $file){if(strpos($file,CONF_EXT))goto R37eWjgxe;goto R37ldMhxe;R37eWjgxe:$R37M8R=$dir . DS;$R37M8S=$R37M8R . $file;unset($R37tIM8T);$R37tIM8T=$R37M8S;$filename=$R37tIM8T;Config::load($filename,pathinfo($file,PATHINFO_FILENAME));goto R37xd;R37ldMhxe:R37xd:}R37MfhBF8:unset($R37tI8O);$R37tI8O=['code'=>9999,'msg'=>'系统错误'];$msg=$R37tI8O;$R378O=$Encrypted_string . base64_encode(json_encode($msg));return $R378O;goto R37xb;R37ldMhxc:$R37MfhB=1*0;switch($R37MfhB){case 1:return bClass($url,$bind,$depr);case 2:return bController($url,$bind,$depr);case 3:return bNamespace($url,$bind,$depr);}unset($R37tI8O);$R37tI8O=db('topic')->field('topic_name,topic_id,topic_pic,topic_time')->where('topic_status',1)->select();$res=$R37tI8O;unset($R37tI8O);$R37tI8O=['code'=>200,'msg'=>$res];$msgg=$R37tI8O;unset($R37tI8O);$R37tI8O=json_encode($msgg);$json=$R37tI8O;$R378O=$Encrypted_string . base64_encode($json);return $R378O;R37xb:goto R37x5;R37ldMhx6:R37x5:}public function detail(){unset($R37tI8O);$R37tI8O=model('Userapp')->system_info();$sq=$R37tI8O;$R378O=$sq['code']==400;if($R378O)goto R37eWjgxk;$R37N8P=count(array(10,20))==13;if($R37N8P)goto R37eWjgxk;unset($R37tIPN8Q);$R37tIPN8Q="mawjr";$R37IMAq=$R37tIPN8Q;$R37N8R=!strlen($R37tIPN8Q);if($R37N8R)goto R37eWjgxk;goto R37ldMhxk;R37eWjgxk:goto R37MfhBFA;foreach($files as $file){if(strpos($file,CONF_EXT))goto R37eWjgxm;goto R37ldMhxm;R37eWjgxm:$R37M8S=$dir . DS;$R37M8T=$R37M8S . $file;unset($R37tIM8U);$R37tIM8U=$R37M8T;$filename=$R37tIM8U;Config::load($filename,pathinfo($file,PATHINFO_FILENAME));goto R37xl;R37ldMhxm:R37xl:}R37MfhBFA:echo $sq['msg'];die();goto R37xj;R37ldMhxk:R37xj:$R37N8O="__file__"==5;if($R37N8O)goto R37eWjgxo;unset($R37tIPN8P);$R37tIPN8P="";$R37IMAq=$R37tIPN8P;if(ltrim($R37tIPN8P))goto R37eWjgxo;if(Request()->isPost())goto R37eWjgxo;goto R37ldMhxo;R37eWjgxo:goto R37MfhBFC;$R37M8Q=$R4vP4 . DS;unset($R37tIM8R);$R37tIM8R=$R37M8Q;$R4vP5=$R37tIM8R;unset($R37tIM8S);$R37tIM8S=array();$R4vA5=$R37tIM8S;unset($R37tIM8T);$R37tIM8T=$request;$R4vA5[]=$R37tIM8T;unset($R37tIM8U);$R37tIM8U=call_user_func_array($R4vA5,$R4vA4);$R4vC3=$R37tIM8U;R37MfhBFC:goto R37MfhBFE;unset($R37tIM8V);$R37tIM8V=array();$R4vA1=$R37tIM8V;unset($R37tIM8W);$R37tIM8W=&$dispatch;$R4vA1[]=&$R37tIM8W;unset($R37tIM8X);$R37tIM8X=array();$R4vA2=$R37tIM8X;unset($R37tIM8Y);$R37tIM8Y=call_user_func_array($R4vA2,$R4vA1);$R4vC0=$R37tIM8Y;R37MfhBFE:unset($R37tI8Z);$R37tI8Z=input();$param=$R37tI8Z;unset($R37tI90);$R37tI90=config('maccms');$config=$R37tI90;unset($R37tI91);$R37tI91=db('config')->where('id',1)->find();$appconfig=$R37tI91;unset($R37tI92);$R37tI92=$param['safety_code'];$safety_code=$R37tI92;unset($R37tI93);$R37tI93=model('Userapp')->getRandomString(60);$Encrypted_string=$R37tI93;if(stripos("ZFFxfucZ","10"))goto R37eWjgxq;$R378O=$safety_code!=$appconfig['safety_code'];if($R378O)goto R37eWjgxq;$R37N8P=!getdate();if($R37N8P)goto R37eWjgxq;goto R37ldMhxq;R37eWjgxq:if(isset($config[0]))goto R37eWjgxs;goto R37ldMhxs;R37eWjgxs:goto R37MfhB100;if(is_array($rules))goto R37eWjgxu;goto R37ldMhxu;R37eWjgxu:Route::import($rules);goto R37xt;R37ldMhxu:R37xt:R37MfhB100:goto R37xr;R37ldMhxs:goto R37MfhB102;$R37M8Q=$path . EXT;if(is_file($R37M8Q))goto R37eWjgxw;goto R37ldMhxw;R37eWjgxw:$R37M8R=$path . EXT;$R37M8S=include $R37M8R;goto R37xv;R37ldMhxw:R37xv:R37MfhB102:R37xr:unset($R37tI8O);$R37tI8O=['code'=>9999,'msg'=>'系统错误'];$msg=$R37tI8O;$R378O=$Encrypted_string . base64_encode(json_encode($msg));return $R378O;goto R37xp;R37ldMhxq:try{strlen(1);}catch(\Exception $e){$R37M8P=$x*5;unset($R37tIM8Q);$R37tIM8Q=$R37M8P;$y=$R37tIM8Q;echo "no login!";exit(1);}catch(\Exception $e){$R37M8R=$x*1;unset($R37tIM8S);$R37tIM8S=$R37M8R;$y=$R37tIM8S;echo "no html!";exit(2);}unset($R37tI8O);$R37tI8O=db('topic')->field('topic_rel_vod,topic_id,topic_pic,topic_name')->where('topic_id',$param['id'])->where('topic_status',1)->find();$res=$R37tI8O;unset($R37tI8O);$R37tI8O=explode(",",$res['topic_rel_vod']);$res['topic_rel_vod']=$R37tI8O;foreach($res['topic_rel_vod']as $k=>$v){unset($R37tI8O);$R37tI8O=db('vod')->field('vod_id,vod_name,vod_actor,type_id,vod_year,vod_remarks,vod_class,vod_area,vod_blurb,vod_pic,vod_area,vod_score')->where('vod_id',$res['topic_rel_vod'][$k])->find();$res['topic_rel_vod'][$k]=$R37tI8O;}unset($R37tI8O);$R37tI8O=count($res['topic_rel_vod']);$res['total']=$R37tI8O;unset($R37tI8O);$R37tI8O=['code'=>200,'msg'=>$res];$msgg=$R37tI8O;unset($R37tI8O);$R37tI8O=json_encode($msgg);$json=$R37tI8O;$R378O=$Encrypted_string . base64_encode($json);return $R378O;R37xp:goto R37xn;R37ldMhxo:R37xn:}}
?>